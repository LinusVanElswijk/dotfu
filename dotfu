function dotfu() {
  local command=$1
  local command_list=()

  # Guard clauses
  if [[ -z $command ]] ; then
    >&2 echo "Error: no command provided."
    return 1
  fi

  if [[ -z $DOTFILES_DIR ]] && [[ $command != "bootstrap" ]] ; then
    >&2 echo "Error: environment variable DOTFILES_DIR has not been set."
    return 1
  fi

  # Commands
  command_list+="cd"
  function df_cd() {
    cd $DOTFILES_DIR
  }
  
  command_list+=("status")
  function df_status() {
    (cd $DOTFILES_DIR && git status)
  }
   
  command_list+=("bootstrap")
  function df_bootstrap() {
    echo "bootstrap"
  }

  # Main
  for i in "${command_list[@]}" ; do
    if [[ "$command" == "$i" ]] ; then
        eval "df_${command}"
        return 0
    fi
  done

  echo "Error: not a valid command."
  echo "Commands: ${command_list[*]}"
  return 1
}
dotfu

